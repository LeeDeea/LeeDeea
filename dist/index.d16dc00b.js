import{_ as B}from"./index.2b66952b.js";import{o as I,b as T,F as Q,f as Z,e as E,g as ot,d as it,h as j,A as st,B as lt,p as ut,j as ct,r as R,k as X}from"./vendor.674df8de.js";var ht="./dist/bg-rotate.d8ddb69e.gif",ft="./dist/bg-rotate2.377ae7bd.gif";const dt={data(){return{data:[{path:ht,title:"canvas\u5236\u4F5C\u7684\u661F\u7A7A\u56FE"},{path:ft,title:"canvas\u5236\u4F5C\u7684\u65CB\u8F6C\u65B9\u5757"}]}},methods:{move(t){let e=t.currentTarget,n=t.currentTarget.firstElementChild,r=t.clientX-e.offsetLeft-n.offsetWidth/2,a=t.clientY-e.offsetTop-n.offsetHeight/2;n.style.transform=`matrix3d(
        1,0,0,${.0015*(r/200)},
        0,1,0,${.0015*(a/200)},
        0,0,1,0,
        0,0,0,1)`},leave(t){let e=t.currentTarget.firstElementChild;e.style.transform=` matrix3d(
        1,0,0,0,
        0,1,0,0,
        0,0,1,0,
        0,0,0,1)`}}},pt={class:"content"},mt={class:"card"},vt=["src"];function yt(t,e,n,r,a,s){return I(),T("div",pt,[(I(!0),T(Q,null,Z(a.data,(c,m)=>(I(),T("div",{key:m,class:"card_warp",onMouseleave:e[0]||(e[0]=g=>s.leave(g)),onMousemove:e[1]||(e[1]=g=>s.move(g))},[E("div",mt,[E("img",{src:c.path,alt:""},null,8,vt),E("span",null,ot(c.title),1)])],32))),128))])}var gt=B(dt,[["render",yt],["__scopeId","data-v-4b804ccc"]]),xt="./dist/fluidicon.1bedd6a1.png";const _t=it({data(){return{list:[],timer:null,tagEle:null,paper:null,RADIUS:null,fallLength:null,tags:null,angleX:null,angleY:null,CX:null,CY:null}},methods:{init(){let t=document.querySelectorAll(".tag"),e=document.querySelector(".tagBall"),n=150,r=500,a=[],s=Math.PI/500,c=Math.PI/500,m=e.offsetWidth/2,g=e.offsetHeight/2;function S(){function p(){return parseInt(Math.random()*255)}for(let f=0;f<t.length;f++){let _=-1+(2*(f+1)-1)/t.length,o=Math.acos(_),l=o*Math.sqrt(t.length*Math.PI),y=n*Math.sin(o)*Math.cos(l),w=n*Math.sin(o)*Math.sin(l),$=n*Math.cos(o),b=new x(t[f],y,w,$);t[f].style.color=`rgb(${p()},${p()},${p()})`,a.push(b),b.move()}}function d(){let p=Math.cos(s),f=Math.sin(s);a.forEach(function(){let _=this.y*p-this.z*f,o=this.z*p+this.y*f;this.y=_,this.z=o})}function u(){let p=Math.cos(c),f=Math.sin(c);a.forEach(function(){let _=this.x*p-this.z*f,o=this.z*p+this.x*f;this.x=_,this.z=o})}class x{constructor(f,_,o,l){this.ele=f,this.x=_,this.y=o,this.z=l}move(){let f=r/(r-this.z),_=(this.z+n)/(2*n),o=this.x+m-this.ele.offsetWidth/2+"px",l=this.y+g-this.ele.offsetHeight/2+"px",y=`translate(${o},${l}) scale(${f})`;this.ele.style.opacity=_+.5,this.ele.style.zIndex=parseInt(f*100),this.ele.style.transform=y,this.ele.style.webkitTransform=y}}a.forEach=function(p){for(let f=0;f<this.length;f++)p.call(this[f])};let z=this;function i(){d(),u(),a.forEach(function(){this.move()}),z.timer=requestAnimationFrame(i)}S(),i()}},created(){for(let t=0;t<20;t++)this.list.push(xt)},mounted(){this.init()},beforeUnmount(){cancelAnimationFrame(this.timer),this.timer=null}}),wt={class:"content"},St={class:"tagBall"},zt=j(" git"),$t=["src"],Mt=j("hub ");function bt(t,e,n,r,a,s){return I(),T("div",wt,[E("div",St,[(I(!0),T(Q,null,Z(t.list,(c,m)=>(I(),T("div",{class:"tag",key:m},[zt,E("img",{src:c},null,8,$t),Mt]))),128))])])}var Ct=B(_t,[["render",bt],["__scopeId","data-v-398dc900"]]),It={value:function(){}};function tt(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new F(n)}function F(t){this._=t}function Tt(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}F.prototype=tt.prototype={constructor:F,on:function(t,e){var n=this._,r=Tt(t+"",n),a,s=-1,c=r.length;if(arguments.length<2){for(;++s<c;)if((a=(t=r[s]).type)&&(a=kt(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<c;)if(a=(t=r[s]).type)n[a]=G(n[a],t.name,e);else if(e==null)for(a in n)n[a]=G(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new F(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,s;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,a=s.length;r<a;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,s=r.length;a<s;++a)r[a].value.apply(e,n)}};function kt(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function G(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=It,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",dispatch:tt}),At=st(Et),Ot=At.dispatch,Y=Math.PI/180,O=1<<11>>5,W=1<<11,qt=function(){var t=[256,256],e=Ft,n=Wt,r=Bt,a=J,s=J,c=Dt,m=Kt,g=et,S=[],d=1/0,u=Ot("word","end"),x=null,z=Math.random,i={},p=Lt;i.canvas=function(o){return arguments.length?(p=C(o),i):p},i.start=function(){var o=f(p()),l=Ht((t[0]>>5)*t[1]),y=null,w=S.length,$=-1,b=[],M=S.map(function(v,h){return v.text=e.call(this,v,h),v.font=n.call(this,v,h),v.style=a.call(this,v,h),v.weight=s.call(this,v,h),v.rotate=c.call(this,v,h),v.size=~~r.call(this,v,h),v.padding=m.call(this,v,h),v}).sort(function(v,h){return h.size-v.size});return x&&clearInterval(x),x=setInterval(k,0),k(),i;function k(){for(var v=Date.now();Date.now()-v<d&&++$<w&&x;){var h=M[$];h.x=t[0]*(z()+.5)>>1,h.y=t[1]*(z()+.5)>>1,Nt(o,h,M,$),h.hasText&&_(l,h,y)&&(b.push(h),u.call("word",i,h),y?Rt(y,h):y=[{x:h.x+h.x0,y:h.y+h.y0},{x:h.x+h.x1,y:h.y+h.y1}],h.x-=t[0]>>1,h.y-=t[1]>>1)}$>=w&&(i.stop(),u.call("end",i,b,y))}},i.stop=function(){return x&&(clearInterval(x),x=null),i};function f(o){o.width=o.height=1;var l=Math.sqrt(o.getContext("2d").getImageData(0,0,1,1).data.length>>2);o.width=(O<<5)/l,o.height=W/l;var y=o.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:l}}function _(o,l,y){t[0],t[1];for(var w=l.x,$=l.y,b=Math.sqrt(t[0]*t[0]+t[1]*t[1]),M=g(t),k=z()<.5?1:-1,v=-k,h,D,K;(h=M(v+=k))&&(D=~~h[0],K=~~h[1],!(Math.min(Math.abs(D),Math.abs(K))>=b));)if(l.x=w+D,l.y=$+K,!(l.x+l.x0<0||l.y+l.y0<0||l.x+l.x1>t[0]||l.y+l.y1>t[1])&&(!y||!Pt(l,o,t[0]))&&(!y||Xt(l,y))){for(var nt=l.sprite,q=l.width>>5,H=t[0]>>5,L=l.x-(q<<4),U=L&127,rt=32-U,at=l.y1-l.y0,V=(l.y+l.y0)*H+(L>>5),N,P=0;P<at;P++){N=0;for(var A=0;A<=q;A++)o[V+A]|=N<<rt|(A<q?(N=nt[P*q+A])>>>U:0);V+=H}return delete l.sprite,!0}return!1}return i.timeInterval=function(o){return arguments.length?(d=o==null?1/0:o,i):d},i.words=function(o){return arguments.length?(S=o,i):S},i.size=function(o){return arguments.length?(t=[+o[0],+o[1]],i):t},i.font=function(o){return arguments.length?(n=C(o),i):n},i.fontStyle=function(o){return arguments.length?(a=C(o),i):a},i.fontWeight=function(o){return arguments.length?(s=C(o),i):s},i.rotate=function(o){return arguments.length?(c=C(o),i):c},i.text=function(o){return arguments.length?(e=C(o),i):e},i.spiral=function(o){return arguments.length?(g=Ut[o]||o,i):g},i.fontSize=function(o){return arguments.length?(r=C(o),i):r},i.padding=function(o){return arguments.length?(m=C(o),i):m},i.random=function(o){return arguments.length?(z=o,i):z},i.on=function(){var o=u.on.apply(u,arguments);return o===u?i:o},i};function Ft(t){return t.text}function Wt(){return"serif"}function J(){return"normal"}function Bt(t){return Math.sqrt(t.value)}function Dt(){return(~~(Math.random()*6)-3)*30}function Kt(){return 1}function Nt(t,e,n,r){if(!e.sprite){var a=t.context,s=t.ratio;a.clearRect(0,0,(O<<5)/s,W/s);var c=0,m=0,g=0,S=n.length;for(--r;++r<S;){e=n[r],a.save(),a.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font;var d=a.measureText(e.text+"m").width*s,u=e.size<<1;if(e.rotate){var x=Math.sin(e.rotate*Y),z=Math.cos(e.rotate*Y),i=d*z,p=d*x,f=u*z,_=u*x;d=Math.max(Math.abs(i+_),Math.abs(i-_))+31>>5<<5,u=~~Math.max(Math.abs(p+f),Math.abs(p-f))}else d=d+31>>5<<5;if(u>g&&(g=u),c+d>=O<<5&&(c=0,m+=g,g=0),m+u>=W)break;a.translate((c+(d>>1))/s,(m+(u>>1))/s),e.rotate&&a.rotate(e.rotate*Y),a.fillText(e.text,0,0),e.padding&&(a.lineWidth=2*e.padding,a.strokeText(e.text,0,0)),a.restore(),e.width=d,e.height=u,e.xoff=c,e.yoff=m,e.x1=d>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,c+=d}for(var o=a.getImageData(0,0,(O<<5)/s,W/s).data,l=[];--r>=0;)if(e=n[r],!!e.hasText){for(var d=e.width,y=d>>5,u=e.y1-e.y0,w=0;w<u*y;w++)l[w]=0;if(c=e.xoff,c==null)return;m=e.yoff;for(var $=0,b=-1,M=0;M<u;M++){for(var w=0;w<d;w++){var k=y*M+(w>>5),v=o[(m+M)*(O<<5)+(c+w)<<2]?1<<31-w%32:0;l[k]|=v,$|=v}$?b=M:(e.y0++,u--,M--,m++)}e.y1=e.y0+b,e.sprite=l.slice(0,(e.y1-e.y0)*y)}}}function Pt(t,e,n){n>>=5;for(var r=t.sprite,a=t.width>>5,s=t.x-(a<<4),c=s&127,m=32-c,g=t.y1-t.y0,S=(t.y+t.y0)*n+(s>>5),d,u=0;u<g;u++){d=0;for(var x=0;x<=a;x++)if((d<<m|(x<a?(d=r[u*a+x])>>>c:0))&e[S+x])return!0;S+=n}return!1}function Rt(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Xt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function et(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Yt(t){var e=4,n=e*t[0]/t[1],r=0,a=0;return function(s){var c=s<0?-1:1;switch(Math.sqrt(1+4*c*s)-c&3){case 0:r+=n;break;case 1:a+=e;break;case 2:r-=n;break;default:a-=e;break}return[r,a]}}function Ht(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Lt(){return document.createElement("canvas")}function C(t){return typeof t=="function"?t:function(){return t}}var Ut={archimedean:et,rectangular:Yt};const Vt={props:{margin:{type:Object,default:{top:15,right:15,bottom:15,left:15}},padding:{type:Number,default:3},rotate:{type:Object,default:function(){return{from:0,to:0,numOfOrientation:0}}},spiral:{type:String,default:"archimedean"},fontScale:{type:String,default:"sqrt"},font:{type:String,default:"impact"},fontSize:{type:Array,default:function(){return[10,80]}},color:{type:[String,Array],default:"Category10"},data:{type:Array,default:[{name:"\u6D4B\u8BD51",value:10},{name:"\u6D4B\u8BD52",value:100},{name:"\u6D4B\u8BD53",value:23},{name:"\u6D4B\u8BD54",value:52},{name:"\u6D4B\u8BD55",value:3245},{name:"\u6D4B\u8BD56",value:345},{name:"\u6D4B\u8BD57",value:234},{name:"\u6D4B\u8BD58",value:54},{name:"\u6D4B\u8BD59",value:10},{name:"\u6D4B\u8BD510",value:100},{name:"\u6D4B\u8BD511",value:23},{name:"\u6D4B\u8BD512",value:3245},{name:"\u6D4B\u8BD513",value:52},{name:"\u6D4B\u8BD514",value:345},{name:"\u6D4B\u8BD515",value:234},{name:"\u6D4B\u8BD516",value:54}]},nameKey:{type:String,default:"name"},valueKey:{type:String,default:"value"},showTooltip:{type:Boolean,default:!0},wordClick:{type:Function,default:null}},data(){return{svgWidth:0,svgHeight:0}},computed:{size(){const{svgWidth:t,svgHeight:e}=this,{margin:n}=this,r=t-n.left-n.right,a=e-n.top-n.bottom;return{width:r,height:a}},words(){const{data:t,valueKey:e}=this;return t.sort(function(r,a){return parseFloat(a[e])-parseFloat(r[e])})}},watch:{words:{handler:function(t,e){this.update()},deep:!0}},mounted(){this.getSize(),this.chart=this.createChart(),this.renderChart()},beforeUnmount(){let t=document.getElementsByClassName("wordCloud")[0];for(let e of t.childNodes)e.remove()},methods:{onResize(){this.getSize()},getSize(){this.svgWidth=this.$el.clientWidth,this.svgHeight=this.$el.clientHeight},createChart(){const{margin:t}=this,{width:e,height:n}=this.size;return this.$d3.select(".wordCloud").append("svg").attr("width","100%").attr("height","100%").append("g").attr("width",e).attr("height",n).attr("class","chart").attr("transform","translate("+t.left+","+t.top+")")},setFontSizeScale(){const{fontSize:t,fontScale:e,words:n,valueKey:r}=this;switch(e){case"sqrt":this.fontSizeScale=this.$d3.scaleSqrt();break}this.fontSizeScale.range(t),n.length&&this.fontSizeScale.domain([+n[n.length-1][r]||1,+n[0][r]])},renderChart(){this.setFontSizeScale();const{spiral:t,padding:e,fontSizeScale:n,font:r,words:a,nameKey:s,valueKey:c}=this,{width:m,height:g}=this.size,S=this,{a:d,b:u,c:x}=function(){const{from:p,to:f,numOfOrientation:_}=S.rotate,o=(Math.abs(p)+Math.abs(f))/(_-1)||1;return{a:_,b:p/o,c:o}}(),i=qt().size([m,g]).words(a).fontSize(p=>n(p[c])).text(p=>p[s]).font(r).padding(e).rotate(()=>(~~(Math.random()*d)+u)*x).spiral(t).on("end",this.draw);this.layout=i,i.start()},getColorScale(t){return typeof t=="string"?this.$d3.scaleOrdinal(lt["scheme"+t]):this.$d3.scaleOrdinal(t)},draw(t){const{layout:e,chart:n,color:r,nameKey:a,valueKey:s,showTooltip:c,wordClick:m}=this,g=this.getColorScale(r),S=n.append("g").attr("transform","translate("+e.size()[0]/2+","+e.size()[1]/2+")");this.$d3.select("body").append("div").attr("class","tooltip").style("opacity",0),S.selectAll("text").data(t).enter().append("text").style("font-size",u=>u.size+"px").style("font-family",u=>u.font).style("fill",(u,x)=>g(x)).attr("class","text").attr("text-anchor","middle").transition().duration(500).attr("transform",u=>"translate("+[u.x,u.y]+")rotate("+u.rotate+")").text(u=>u.text)},update(){const{words:t,layout:e,fontSizeScale:n,chart:r,valueKey:a}=this,{width:s,height:c}=this.size;t.length&&n.domain([+t[t.length-1][a]||1,+t[0][a]]),r.select("g").remove(),e.stop().size([s,c]).words(t).start()}}},Gt=t=>(ut("data-v-09c88fc8"),t=t(),ct(),t),Jt={class:"content"},Qt=Gt(()=>E("div",{class:"wordCloud"},null,-1)),Zt=[Qt];function jt(t,e,n,r,a,s){return I(),T("div",Jt,Zt)}var te=B(Vt,[["render",jt],["__scopeId","data-v-09c88fc8"]]);const ee={components:{Card:gt,TitleCloud:Ct,WordCloud:te},methods:{init(){}},mounted(){this.init()}},ne={class:"warp"};function re(t,e,n,r,a,s){const c=R("card"),m=R("word-cloud"),g=R("title-cloud");return I(),T("div",ne,[X(c),X(m),X(g)])}var ie=B(ee,[["render",re],["__scopeId","data-v-41a3154b"]]);export{ie as default};
